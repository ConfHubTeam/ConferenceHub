/* Touch Action Rules for Mobile Interaction */

/* Prevent page zoom globally while allowing scroll */
html {
  touch-action: manipulation;
  -webkit-text-size-adjust: 100%;
  -webkit-touch-callout: none;
  /* Fix iOS Safari viewport height issues */
  height: -webkit-fill-available;
}

body {
  touch-action: manipulation;
  /* Allow text selection by default - users should be able to copy text */
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
  user-select: text;
  /* Prevent iOS elastic scrolling */
  overscroll-behavior: none;
  -webkit-overflow-scrolling: auto;
  /* Fix iOS Safari viewport height issues */
  min-height: 100vh;
  min-height: -webkit-fill-available;
}

/* Allow text selection in input fields and content areas */
input, textarea, [contenteditable] {
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
  user-select: text;
  /* Prevent iOS zoom on input focus */
  font-size: 16px !important;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

/* Ensure text content areas are selectable */
p, 
h1, h2, h3, h4, h5, h6,
div.content,
.description,
.text-content,
.article,
.review,
.comment,
span.selectable,
.place-description,
.place-title,
.place-details {
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
  user-select: text;
}

/* Map container specific rules */
.map-container {
  touch-action: none; /* Allow all gestures for map interaction */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Prevent iOS elastic scrolling on map */
  overscroll-behavior: none;
  -webkit-overflow-scrolling: auto;
}

/* Google Maps specific overrides */
.gm-fullscreen-control,
.gm-bundled-control,
.gmnoprint {
  touch-action: manipulation;
}

/* Google Maps container styling */
.gm-style {
  /* Ensure proper touch handling in Google Maps */
  touch-action: none;
}

.gm-style > div:first-child {
  /* Allow all touch gestures on the map canvas */
  touch-action: none !important;
}

/* Prevent double-tap zoom on buttons and interactive elements */
button, 
a, 
[role="button"],
.clickable {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  /* Prevent iOS callout menu */
  -webkit-touch-callout: none;
  /* Disable text selection on interactive elements */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Disable text selection on navigation and UI elements */
nav,
.navbar,
.menu,
.header,
.sidebar,
.controls,
.tabs,
.pagination {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Calendar and date picker touch handling */
.calendar-container {
  touch-action: pan-x pan-y; /* Allow horizontal and vertical panning */
}

/* Photo gallery and carousel touch handling */
.photo-gallery,
.carousel {
  touch-action: pan-x; /* Allow only horizontal panning */
  -webkit-overflow-scrolling: touch;
}

/* Place card image swipe optimization for smooth mobile experience */
.place-card-image-swipe {
  /* Hardware acceleration for smooth animations */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  perspective: 1000px;
  -webkit-perspective: 1000px;
  
  /* Optimize touch response */
  touch-action: pan-x;
  -webkit-overflow-scrolling: touch;
  
  /* Prevent text selection during swipe */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  
  /* Remove tap highlight */
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
}

/* Optimize image rendering during swipe */
.place-card-image-swipe img {
  /* Hardware acceleration */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  
  /* Optimize image rendering */
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
  
  /* Prevent dragging */
  pointer-events: none;
  -webkit-user-drag: none;
}

/* YouTube video fullscreen handling */
.youtube-fullscreen {
  touch-action: manipulation; /* Prevent pinch zoom but allow basic touch */
  overflow: hidden; /* Prevent any overflow/scrolling */
}

.youtube-fullscreen iframe {
  max-width: 100vw !important;
  max-height: 100vh !important;
  width: 100% !important;
  height: 100% !important;
  object-fit: contain;
}

/* Scrollable content areas */
.scrollable {
  touch-action: pan-y; /* Allow only vertical scrolling */
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* Main page listings specific scrolling */
[data-listings-section] {
  touch-action: pan-y; /* Allow vertical scrolling */
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  /* Ensure smooth scrolling on all devices */
  scroll-behavior: smooth;
}

/* Prevent zoom on form inputs */
input[type="text"],
input[type="email"],
input[type="password"],
input[type="number"],
input[type="tel"],
input[type="url"],
input[type="search"],
select,
textarea {
  font-size: 16px !important; /* Prevents iOS zoom on focus */
  touch-action: manipulation;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  /* Prevent iOS Safari input styling */
  border-radius: 0;
}

/* Map info windows and overlays */
.gm-style-iw,
.gm-style-iw-c,
.gm-style-iw-d {
  touch-action: manipulation;
}

/* Ensure proper touch handling for mobile navigation */
.mobile-nav,
.drawer,
.sidebar {
  touch-action: pan-y;
  overscroll-behavior: contain;
}

/* Booking widget and interactive panels */
.booking-widget,
.interactive-panel {
  touch-action: manipulation;
}

/* iOS Safari specific fixes */
@supports (-webkit-touch-callout: none) {
  /* iOS-specific styles */
  .full-height-ios {
    height: calc(var(--vh, 1vh) * 100);
  }
  
  /* Better iOS Safari scrolling without breaking normal scroll */
  body {
    /* Remove position: fixed and overflow: hidden that breaks scrolling */
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }
  
  #root {
    min-height: 100vh;
    min-height: -webkit-fill-available;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Fixed header for iOS Safari */
  .fixed.top-0 {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    width: 100%;
    z-index: 1000;
    /* Prevent Safari from moving the header during elastic scroll */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }
}

/* Prevent text selection on map markers and controls */
.gm-style .gm-style-cc,
.gm-style .gm-style-mt,
.gm-bundled-control {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Better touch target sizes for mobile */
@media (max-width: 768px) {
  button,
  .clickable,
  [role="button"] {
    min-height: 44px; /* iOS recommended touch target size */
    min-width: 44px;
  }
  
  /* Ensure map controls are properly sized for touch */
  .gm-bundled-control {
    min-height: 40px;
    min-width: 40px;
  }
}

/* Prevent zoom on specific gestures */
.prevent-zoom {
  touch-action: pan-x pan-y pinch-zoom;
}

/* Allow only panning (no zoom) */
.pan-only {
  touch-action: pan-x pan-y;
}

/* Allow all gestures (for maps) */
.allow-all-gestures {
  touch-action: none;
}

/* Utility classes for text selection control */
.text-selectable {
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
  user-select: text !important;
}

.text-not-selectable {
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  user-select: none !important;
}

/* Mobile map view specific styles */
@media (max-width: 768px) {
  /* Fixed header and filters for mobile map view */
  .fixed.top-0 {
    position: fixed;
    width: 100%;
    left: 0;
    right: 0;
    z-index: 1000;
  }

  /* Prevent content from sliding under the fixed header */
  .pt-\[120px\] {
    padding-top: 120px; /* Adjust this value based on your header + filter height */
  }
}
